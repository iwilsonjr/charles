const localPath="/wp-content/themes/charles-child/",html=document.querySelector("html"),body=document.querySelector("body"),archives=document.getElementById("archives"),inputSearch=document.getElementById("inputSearch"),container=document.querySelector(".container"),btnNavigation=document.getElementById("btnNavigation"),navFind=document.querySelector("[href='#find']"),navContact=document.querySelector("[href*='contact/']"),selectMonth=document.getElementById("selectMonthArchive"),search=document.getElementById("search");let message="";function openNavigation(){container.classList.toggle("jsNavOpen"),navContact.parentElement.classList.remove("selected"),navFind.parentElement.classList.toggle("selected"),event.preventDefault()}html.className.indexOf("no-js")>-1&&html.removeAttribute("class"),btnNavigation.addEventListener("click",function(){openNavigation()}),navFind.addEventListener("click",function(){openNavigation()}),selectMonth.addEventListener("click",function(){"Select Month/Year"===archives.value&&(event.preventDefault(),null===document.querySelector("#archivesForm span")&&(message='<span class="error" id="archivesError" aria-live="polite">Please select a date.</span>',archives.setAttribute("aria-describedby","archivesError"),archives.insertAdjacentHTML("beforebegin",message),archives.classList.add("errorField"),archives.focus()))}),search.addEventListener("click",function(){""===inputSearch.value.trim()&&(event.preventDefault(),null===document.querySelector("#searchForm span")&&(message='<span class="error" id="searchError" aria-live="polite">Please type some text.</span>',inputSearch.setAttribute("aria-describedby","searchError"),inputSearch.insertAdjacentHTML("beforebegin",message),inputSearch.classList.add("errorField"),inputSearch.focus()))}),navContact.addEventListener("click",function(){event.preventDefault();const e=document.getElementById("ajaxWindow");if(e.className.indexOf("hide")>-1){const n=`<div class="loading"><img src="${localPath}images/content/loading.png" width="163" height="163" alt="Loading..." /></div>`,a='<button type="button" class="closeWindow">[X] Close</button>',o='<p class="thanks"><strong>Thanks!</strong> Your email was successfully sent. Should be in touch ASAP.</p>';e.setAttribute("aria-live","polite"),e.classList.remove("hide"),e.innerHTML=n,navContact.parentElement.classList.contains("selected")||container.classList.contains("jsNavOpen")&&(container.classList.remove("jsNavOpen"),navFind.parentElement.classList.toggle("selected")),axios.get("contact/").then(function(s){const r=(new DOMParser).parseFromString(s.data,"text/html").querySelector("#contactForm");document.querySelector(".loading").remove(),e.appendChild(r),e.insertAdjacentHTML("afterbegin",a);const i=document.querySelector("[name='sendemail']");document.querySelector(".closeWindow").addEventListener("click",function(){t(),event.preventDefault()}),i.addEventListener("click",function(){event.preventDefault();let t=!1;if(document.querySelectorAll(".requiredField").forEach(function(e){if("SPAN"===e.previousElementSibling.tagName&&e.previousElementSibling.remove(),""===e.value.trim()){let n=e.previousElementSibling.textContent.toLocaleLowerCase();e.insertAdjacentHTML("beforebegin",`<span class="error">You forgot to enter your ${n}</span>`),t=!0}else if(e.classList.contains("email")){if(!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.value.trim())){let n=e.previousElementSibling.textContent.toLocaleLowerCase();e.insertAdjacentHTML("beforebegin",`<span class="error">You forgot to enter your ${n}</span>`),t=!0}}}),!t){const t=document.getElementById("contactName"),a=document.getElementById("email"),s=document.getElementById("commentsText");let i=new FormData;i.append("contactName",t.value),i.append("email",a.value),i.append("comments",s.value),i.append("submitted","true"),i.append("sendemail","SEND EMAIL"),axios.post(r.action,i,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{console.log(t.data),n.remove(),e.innerHTML=o})}})})}else t();function t(){e.classList.add("hide"),e.textContent="",e.removeAttribute("aria-live")}});